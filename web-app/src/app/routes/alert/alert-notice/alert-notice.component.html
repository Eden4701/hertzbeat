<app-help-massage-show
  [help_massage_content]="'alert.help.notice' | i18n"
  [guild_link]="'alert.help.notice.link' | i18n"
  [module_name]="'menu.alert.dispatch'"
  [icon_name]="'monitor_icon.alert_notice' | i18n"
></app-help-massage-show>
<nz-divider></nz-divider>
<nz-tabset nzSize="large">
  <nz-tab [nzTitle]="'alert.notice.receiver' | i18n">
    <div style="margin-bottom: 20px">
      <button nz-button nzType="primary" (click)="syncReceiver()">
        <i nz-icon nzType="sync" nzTheme="outline"></i>
        {{ 'common.refresh' | i18n }}
      </button>

      <button nz-button nzType="primary" (click)="onNewNoticeReceiver()">
        <i nz-icon nzType="appstore-add" nzTheme="outline"></i>
        {{ 'alert.notice.receiver.new' | i18n }}
      </button>
    </div>
    <nz-table
      #fixedTable
      [nzData]="receivers"
      nzFrontPagination="false"
      [nzLoading]="receiverTableLoading"
      [nzScroll]="{ x: '1240px', y: '100%' }"
    >
      <thead>
        <tr>
          <th nzAlign="center" nzWidth="15%">{{ 'alert.notice.receiver.people' | i18n }}</th>
          <th nzAlign="center" nzWidth="20%">{{ 'alert.notice.receiver.type' | i18n }}</th>
          <th nzAlign="center" nzWidth="20%">{{ 'alert.notice.receiver.setting' | i18n }}</th>
          <th nzAlign="center" nzWidth="20%">{{ 'common.edit-time' | i18n }}</th>
          <th nzAlign="center" nzWidth="25%">{{ 'common.edit' | i18n }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of fixedTable.data">
          <td nzAlign="center">
            <span>{{ data.name }}</span>
          </td>
          <td nzAlign="center">
            <nz-tag *ngIf="data.type == 0" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.sms' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 1" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.email' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 2" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>WebHook</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 3" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.wechat' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 4" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.wework' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 5" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.ding' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 6" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.fei-shu' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 7" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.telegram-bot' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 8" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.slack' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 9" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.discord' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 10" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.weChatApp' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 11" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.smn' | i18n }}</span>
            </nz-tag>
            <nz-tag *ngIf="data.type == 12" nzColor="orange">
              <i nz-icon nzType="notification" nzTheme="outline"></i>
              <span>{{ 'alert.notice.type.serverchan' | i18n }}</span>
            </nz-tag>
          </td>
          <td nzAlign="center">
            <span *ngIf="data.type == 0">{{ data.phone }}</span>
            <span *ngIf="data.type == 1">{{ data.email }}</span>
            <span *ngIf="data.type == 2">{{ data.hookUrl }}</span>
            <span *ngIf="data.type == 3">{{ data.wechatId }}</span>
            <span *ngIf="data.type == 4">{{ data.wechatId }}</span>
            <span *ngIf="data.type == 5">{{ data.accessToken }}</span>
            <span *ngIf="data.type == 6">{{ data.wechatId }}</span>
            <span *ngIf="data.type == 7">{{ data.tgBotToken }}<br />{{ data.tgUserId }}</span>
            <span *ngIf="data.type == 8">{{ data.slackWebHookUrl }}</span>
            <span *ngIf="data.type == 9">{{ data.discordChannelId }}<br />{{ data.discordBotToken }}</span>
            <span *ngIf="data.type == 10">{{ data.corpId }}<br />{{ data.agentId }}<br />{{ data.appSecret }}</span>
            <span *ngIf="data.type == 11">{{ data.smnAk }}</span>
            <span *ngIf="data.type == 12">{{ data.serverChanToken }}</span>
          </td>
          <td nzAlign="center">{{ (data.gmtUpdate ? data.gmtUpdate : data.gmtCreate) | date : 'YYYY-MM-dd HH:mm:ss' }}</td>
          <td nzAlign="center">
            <button
              nz-button
              nzType="primary"
              (click)="onEditOneNoticeReceiver(data)"
              nz-tooltip
              [nzTooltipTitle]="'alert.notice.receiver.edit' | i18n"
            >
              <i nz-icon nzType="edit" nzTheme="outline"></i>
            </button>
            <button
              nz-button
              nzType="primary"
              nzDanger
              (click)="onDeleteOneNoticeReceiver(data.id)"
              nz-tooltip
              [nzTooltipTitle]="'alert.notice.receiver.delete' | i18n"
            >
              <i nz-icon nzType="delete" nzTheme="outline"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </nz-tab>
  <nz-tab [nzTitle]="'alert.notice.template' | i18n">
    <div style="margin-bottom: 20px">
      <button nz-button nzType="primary" (click)="syncTemplate()">
        <i nz-icon nzType="sync" nzTheme="outline"></i>
        {{ 'common.refresh' | i18n }}
      </button>
      <button nz-button nzType="primary" (click)="onNewNoticeTemplate()">
        <i nz-icon nzType="appstore-add" nzTheme="outline"></i>
        {{ 'alert.notice.template.new' | i18n }}
      </button>
    </div>
    <nz-table
      #templateFixedTable
      [nzData]="templates"
      nzFrontPagination="false"
      [nzLoading]="templateTableLoading"
      [nzScroll]="{ x: '1240px', y: '100%' }"

    >
      <thead>
      <tr>
        <th nzAlign="center" nzWidth="25%">{{ 'alert.notice.template.name' | i18n }}</th>
        <th nzAlign="center" nzWidth="15%">{{ 'alert.notice.template.supplier' | i18n }}</th>
        <th nzAlign="center" nzWidth="15%">{{ 'common.edit-time' | i18n }}</th>
        <th nzAlign="center" nzWidth="25%">{{ 'common.edit' | i18n }}</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of templateFixedTable.data">
        <td nzAlign="center">
          <span>{{ data.name }}</span>
        </td>
        <td nzAlign="center">
          <nz-tag *ngIf="data.type == 0" nzColor="orange">
            <span>{{ 'alert.applier.type.sms' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 1" nzColor="orange">
            <span>{{ 'alert.applier.type.email' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 2" nzColor="orange">
            <span>WebHook</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 3" nzColor="orange">
            <span>{{ 'alert.applier.type.wechat' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 4" nzColor="orange">
            <span>{{ 'alert.applier.type.wework' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 5" nzColor="orange">
            <span>{{ 'alert.applier.type.ding' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 6" nzColor="orange">
            <span>{{ 'alert.applier.type.fei-shu' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 7" nzColor="orange">
            <span>{{ 'alert.applier.type.telegram' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 8" nzColor="orange">
            <span>{{ 'alert.applier.type.slack' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 9" nzColor="orange">
            <span>{{ 'alert.applier.type.discord' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 10" nzColor="orange">
            <span>{{ 'alert.applier.type.weChatApp' | i18n }}</span>
          </nz-tag>
          <nz-tag *ngIf="data.type == 11" nzColor="orange">
            <span>{{ 'alert.applier.type.smn' | i18n }}</span>
          </nz-tag>
        </td>
        <td nzAlign="center">{{ (data.gmtUpdate ? data.gmtUpdate : data.gmtCreate) | date : 'YYYY-MM-dd HH:mm:ss' }}</td>
        <td nzAlign="center">
            <span *ngIf="data.id > 11" >
              <button
                nz-button
                nzType="primary"
                (click)="onEditOneNoticeTemplate(data)"
                nz-tooltip
                [nzTooltipTitle]="'alert.notice.template.edit' | i18n"
              >
                <i nz-icon nzType="edit" nzTheme="outline"></i>
              </button>
              <button
                nz-button
                nzType="primary"
                nzDanger
                (click)="onDeleteOneNoticeTemplate(data.id)"
                nz-tooltip
                [nzTooltipTitle]="'alert.notice.template.delete' | i18n"
              >
                <i nz-icon nzType="delete" nzTheme="outline"></i>
              </button>
            </span>
          <span *ngIf="data.id <= 11" >
              <button
                nz-button
                nzType="primary"
                (click)="onShowOneNoticeTemplate(data)"
                nz-tooltip
                [nzTooltipTitle]="'alert.notice.template.showExample' | i18n"
              >
                <i nz-icon nzType="question-circle" nzTheme="outline"></i>
              </button>
            </span>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </nz-tab>
  <nz-tab [nzTitle]="'alert.notice.rule' | i18n">
    <div style="margin-bottom: 20px">
      <button nz-button nzType="primary" (click)="syncRule()">
        <i nz-icon nzType="sync" nzTheme="outline"></i>
        {{ 'common.refresh' | i18n }}
      </button>

      <button nz-button nzType="primary" (click)="onNewNoticeRule()">
        <i nz-icon nzType="appstore-add" nzTheme="outline"></i>
        {{ 'alert.notice.rule.new' | i18n }}
      </button>
    </div>

    <nz-table
      #ruleFixedTable
      [nzData]="rules"
      nzFrontPagination="false"
      [nzLoading]="ruleTableLoading"
      [nzScroll]="{ x: '1240px', y: '100%' }"
    >
      <thead>
        <tr>
          <th nzAlign="center" nzWidth="15%">{{ 'alert.notice.rule.name' | i18n }}</th>
          <th nzAlign="center" nzWidth="12%">{{ 'alert.notice.receiver.people' | i18n }}</th>
          <th nzAlign="center" nzWidth="12%">{{ 'alert.notice.rule.all' | i18n }}</th>
          <th nzAlign="center" nzWidth="15%">{{ 'alert.notice.rule.enable' | i18n }}</th>
          <th nzAlign="center" nzWidth="15%">{{ 'common.edit-time' | i18n }}</th>
          <th nzAlign="center" nzWidth="25%">{{ 'common.edit' | i18n }}</th>
        </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of ruleFixedTable.data">
        <td nzAlign="center">
          <span>{{ data.name }}</span>
        </td>
        <td nzAlign="center">
          <span>{{ data.receiverName }}</span>
        </td>
        <td nzAlign="center">
          <span>{{ data.templateName }}</span>
        </td>
        <td nzAlign="center">
          <nz-switch [(ngModel)]="data.filterAll" (ngModelChange)="updateNoticeRule(data)"></nz-switch>
        </td>
        <td nzAlign="center">
          <nz-switch [(ngModel)]="data.enable" (ngModelChange)="updateNoticeRule(data)"></nz-switch>
        </td>
        <td nzAlign="center">{{ (data.gmtUpdate ? data.gmtUpdate : data.gmtCreate) | date : 'YYYY-MM-dd HH:mm:ss' }}</td>
        <td nzAlign="center">
          <button
            nz-button
            nzType="primary"
            (click)="onEditOneNoticeRule(data)"
            nz-tooltip
            [nzTooltipTitle]="'alert.notice.rule.edit' | i18n"
          >
            <i nz-icon nzType="edit" nzTheme="outline"></i>
          </button>
          <button
            nz-button
            nzType="primary"
            nzDanger
            (click)="onDeleteOneNoticeRule(data.id)"
            nz-tooltip
            [nzTooltipTitle]="'alert.notice.rule.delete' | i18n"
          >
            <i nz-icon nzType="delete" nzTheme="outline"></i>
          </button>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </nz-tab>
</nz-tabset>

<!-- 新增或修改通知接收配置弹出框 -->
<nz-modal
  [(nzVisible)]="isManageRuleModalVisible"
  [nzTitle]="isManageRuleModalAdd ? ('alert.notice.rule.new' | i18n) : ('alert.notice.rule.edit' | i18n)"
  (nzOnCancel)="onManageRuleModalCancel()"
  (nzOnOk)="onManageRuleModalOk()"
  nzMaskClosable="false"
  nzWidth="40%"
  [nzOkLoading]="isManageRuleModalOkLoading"
>
  <div *nzModalContent class="-inner-content">
    <form nz-form #ruleForm="ngForm">
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzFor="rule_name" nzRequired="true">{{ 'alert.notice.rule.name' | i18n }}</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="'validation.required' | i18n">
          <input [(ngModel)]="rule.name" nz-input required name="rule_name" type="text" id="rule_name" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzSpan="7" nzRequired="true" nzFor="receiver">{{ 'alert.notice.receiver.people' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12" [nzErrorTip]="'validation.required' | i18n">
          <nz-select
            [(ngModel)]="rule.receiverId"
            (nzOpenChange)="loadReceiversOption()"
            [nzOptions]="receiversOption"
            nzShowSearch
            nzAllowClear
            nzPlaceHolder="Select a person"
            required
            name="receiver"
            id="receiver"
          >
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzSpan="7" nzRequired="true" nzFor="templates">{{ 'alert.notice.template' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12" [nzErrorTip]="'validation.required' | i18n">
          <nz-select
            [(ngModel)]="rule.templateId"
            (nzOpenChange)="loadTemplatesOption()"
            [nzOptions]="templatesOption"
            nzShowSearch
            nzAllowClear
            nzPlaceHolder="Select a template"
            required
            name="templates"
            id="templates"
          >
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzSpan="7" nzRequired="true" nzFor="filterAll">{{ 'alert.notice.rule.all' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-switch [(ngModel)]="rule.filterAll" name="filterAll" id="filterAll"></nz-switch>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="!rule.filterAll">
        <nz-form-label nzSpan="7" nzFor="tags">{{ 'alert.notice.rule.tag' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-select
            [(ngModel)]="filterTags"
            (nzOpenChange)="loadTagsOption()"
            [nzOptions]="tagsOption"
            [nzMaxTagCount]="5"
            [nzDisabled]="rule.filterAll"
            nzShowSearch
            nzMode="multiple"
            nzAllowClear
            nzPlaceHolder="Select Tags"
            required
            name="tags"
            id="tags"
          >
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="!rule.filterAll">
        <nz-form-label nzSpan="7" nzFor="priorities">{{ 'alert.notice.rule.priority' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-select
            [(ngModel)]="rule.priorities"
            [nzDisabled]="rule.filterAll"
            (ngModelChange)="onPrioritiesChange()"
            nzShowSearch
            nzMode="multiple"
            nzAllowClear
            nzPlaceHolder="Select Priorities"
            required
            name="priorities"
            id="priorities"
          >
            <nz-option [nzLabel]="'alert.priority.all' | i18n" [nzValue]="9"></nz-option>
            <nz-option [nzLabel]="'alert.priority.0' | i18n" [nzValue]="0"></nz-option>
            <nz-option [nzLabel]="'alert.priority.1' | i18n" [nzValue]="1"></nz-option>
            <nz-option [nzLabel]="'alert.priority.2' | i18n" [nzValue]="2"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzSpan="7" nzFor="isLimit">{{ 'alert.notice.rule.period' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-switch
            [(ngModel)]="isLimit"
            (ngModelChange)="onNoticeRuleLimitChange(isLimit)"
            name="isLimit"
            id="isLimit"
            [nzCheckedChildren]="'alert.notice.rule.period.custom' | i18n"
            [nzUnCheckedChildren]="'alert.notice.rule.period.no-limit' | i18n"
          ></nz-switch>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item *ngIf="isLimit">
        <nz-form-label nzSpan="7" nzFor="days">{{ 'alert.notice.rule.period-chose' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-checkbox-group
            name="days"
            id="days"
            [(ngModel)]="dayCheckOptions"
            (ngModelChange)="onNoticeRuleDaysChange(dayCheckOptions)"
          ></nz-checkbox-group>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzSpan="7" nzFor="time">{{ 'alert.notice.rule.time' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-time-picker [(ngModel)]="rule.periodStart" nzFormat="HH:mm" name="periodStart" id="periodStart"></nz-time-picker>
          <span nz-icon nzType="right-circle" nzTheme="outline" style="margin-right: 6px; margin-left: 6px"></span>
          <nz-time-picker [(ngModel)]="rule.periodEnd" nzFormat="HH:mm" name="periodEnd" id="periodEnd"></nz-time-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzSpan="7" nzRequired="true" nzFor="enable">{{ 'alert.notice.rule.enable' | i18n }}</nz-form-label>
        <nz-form-control nzSpan="12">
          <nz-switch [(ngModel)]="rule.enable" name="enable" id="enable"></nz-switch>
        </nz-form-control>
      </nz-form-item>
    </form>
  </div>
</nz-modal>

<!-- 新增或修改通知策略弹出框 -->
<nz-modal
  [(nzVisible)]="isManageTemplateModalVisible"
  [nzTitle]="isManageTemplateModalAdd ? ('alert.notice.template.new' | i18n) : ('alert.notice.template.edit' | i18n)"
  (nzOnCancel)="onManageTemplateModalCancel()"
  (nzOnOk)="onManageTemplateModalOk()"
  nzMaskClosable="false"
  nzWidth="40%"
  [nzOkLoading]="isManageTemplateModalOkLoading"
>
  <div *nzModalContent class="-inner-content">
    <form nz-form #templateForm="ngForm">
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzFor="template_name" nzRequired="true">{{ 'alert.notice.template.name' | i18n }}</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="'validation.required' | i18n">
          <input [(ngModel)]="template.name" nz-input required name="template_name" type="text" id="template_name" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzSpan="7" nzRequired="true" nzFor="type">{{ 'alert.notice.receiver.type' | i18n }} </nz-form-label>
        <nz-form-control nzSpan="12" [nzErrorTip]="'validation.required' | i18n">
          <nz-select [(ngModel)]="template.type" nzPlaceHolder="Choose" required name="type" id="type1" [nzOptionOverflowSize]="10">
            <nz-option [nzValue]="0" [nzLabel]="'alert.applier.type.sms' | i18n"></nz-option>
            <nz-option [nzValue]="1" [nzLabel]="'alert.applier.type.email' | i18n"></nz-option>
            <nz-option [nzValue]="2" nzLabel="WebHook"></nz-option>
            <nz-option [nzValue]="9" [nzLabel]="'alert.applier.type.discord' | i18n"></nz-option>
            <nz-option [nzValue]="8" [nzLabel]="'alert.applier.type.slack' | i18n"></nz-option>
            <nz-option [nzValue]="4" [nzLabel]="'alert.applier.type.wework' | i18n"></nz-option>
            <nz-option [nzValue]="5" [nzLabel]="'alert.applier.type.ding' | i18n"></nz-option>
            <nz-option [nzValue]="6" [nzLabel]="'alert.applier.type.fei-shu' | i18n"></nz-option>
            <nz-option [nzValue]="7" [nzLabel]="'alert.applier.type.telegram' | i18n"></nz-option>
            <nz-option [nzValue]="10" [nzLabel]="'alert.applier.type.weChatApp' | i18n"></nz-option>
            <nz-option [nzValue]="11" [nzLabel]="'alert.applier.type.smn' | i18n"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzFor="template_content" nzRequired="true">{{ 'alert.notice.template.content' | i18n }}</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="'validation.required' | i18n">
          <textarea [(ngModel)]="template.templateContent" style="white-space:nowrap; overflow:scroll;height: 120px"  nz-input required name="template_content" type="textarea" id="template_content"></textarea>
        </nz-form-control>
      </nz-form-item>
    </form>
  </div>
</nz-modal>
<!-- 新增或修改通知模板弹出框 -->
<nz-modal
  [(nzVisible)]="isManageTemplateModalVisible"
  [nzTitle]="isManageTemplateModalAdd ? ('alert.notice.template.new' | i18n) : ('alert.notice.template.edit' | i18n)"
  (nzOnCancel)="onManageTemplateModalCancel()"
  (nzOnOk)="onManageTemplateModalOk()"
  nzMaskClosable="false"
  nzWidth="40%"
  [nzOkLoading]="isManageTemplateModalOkLoading"
>
  <div *nzModalContent class="-inner-content">
    <form nz-form #templateForm="ngForm">
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzFor="template_name" nzRequired="true">{{ 'alert.notice.template.name' | i18n }}</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="'validation.required' | i18n">
          <input [(ngModel)]="template.name" nz-input required name="template_name" type="text" id="template_name" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzSpan="7" nzRequired="true" nzFor="type">{{ 'alert.notice.receiver.type' | i18n }} </nz-form-label>
        <nz-form-control nzSpan="12" [nzErrorTip]="'validation.required' | i18n">
          <nz-select [(ngModel)]="template.type" nzPlaceHolder="Choose" required name="type" id="type1" [nzOptionOverflowSize]="10">
            <nz-option [nzValue]="0" [nzLabel]="'alert.applier.type.sms' | i18n"></nz-option>
            <nz-option [nzValue]="1" [nzLabel]="'alert.applier.type.email' | i18n"></nz-option>
            <nz-option [nzValue]="2" nzLabel="WebHook"></nz-option>
            <nz-option [nzValue]="9" [nzLabel]="'alert.applier.type.discord' | i18n"></nz-option>
            <nz-option [nzValue]="8" [nzLabel]="'alert.applier.type.slack' | i18n"></nz-option>
            <nz-option [nzValue]="4" [nzLabel]="'alert.applier.type.wework' | i18n"></nz-option>
            <nz-option [nzValue]="5" [nzLabel]="'alert.applier.type.ding' | i18n"></nz-option>
            <nz-option [nzValue]="6" [nzLabel]="'alert.applier.type.fei-shu' | i18n"></nz-option>
            <nz-option [nzValue]="7" [nzLabel]="'alert.applier.type.telegram' | i18n"></nz-option>
            <nz-option [nzValue]="10" [nzLabel]="'alert.applier.type.weChatApp' | i18n"></nz-option>
            <nz-option [nzValue]="11" [nzLabel]="'alert.applier.type.smn' | i18n"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzFor="template_content" nzRequired="true">{{ 'alert.notice.template.content' | i18n }}</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="'validation.required' | i18n">
          <textarea [(ngModel)]="template.templateContent" style="white-space:nowrap; overflow:scroll;height: 120px"  nz-input required name="template_content" type="textarea" id="template_content"></textarea>
        </nz-form-control>
      </nz-form-item>
    </form>
  </div>
</nz-modal>

<!-- 通知模板示例弹出框 -->
<nz-modal
  [(nzVisible)]="isShowTemplateModalVisible"
  [nzTitle]="('alert.notice.template.example' | i18n)"
  (nzOnCancel)="onManageTemplateModalCancel()"
  nzOkDisabled="true"
  nzMaskClosable="false"
  nzWidth="40%"

>
  <div *nzModalContent class="-inner-content">
    <textarea  [(ngModel)]="template.templateContent"  style="white-space:nowrap; overflow:scroll;width: 100%;height: 200px"  name="template_content" type="textarea" id="template_content_example"></textarea>

  </div>
</nz-modal>
